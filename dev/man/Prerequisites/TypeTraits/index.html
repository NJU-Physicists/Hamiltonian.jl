<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Type traits · QuantumLattices.jl</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-89508993-1', 'auto');
ga('send', 'pageview', {'page': location.pathname + location.search + location.hash});
</script><link rel="canonical" href="https://quantum-many-body.github.io/QuantumLattices.jl/latest/man/Prerequisites/TypeTraits/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.png" alt="QuantumLattices.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">QuantumLattices.jl</span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Unitcell Description</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../tutorials/UnitcellDescription/Introduction/">Introduction</a></li><li><a class="tocitem" href="../../../tutorials/UnitcellDescription/SpatialInfoOfAUnitcell/">Spatial info of a unitcell</a></li><li><a class="tocitem" href="../../../tutorials/UnitcellDescription/InternalDegreesOfFreedom/">Internal degrees of freedom</a></li><li><a class="tocitem" href="../../../tutorials/UnitcellDescription/CouplingsAmongDifferentDegreesOfFreedom/">Couplings among different degrees of freedom</a></li><li><a class="tocitem" href="../../../tutorials/UnitcellDescription/GeneratorOfOperators/">Generator of operators</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Engine App Interface</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../tutorials/EngineAppInterface/Introduction/">Introduction</a></li></ul></li></ul></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../Interfaces/">Interfaces</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox" checked/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Prerequisites</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Introduction/">Introduction</a></li><li class="is-active"><a class="tocitem" href>Type traits</a><ul class="internal"><li><a class="tocitem" href="#EfficientOperations"><span>EfficientOperations</span></a></li><li><a class="tocitem" href="#MemoryOrder"><span>MemoryOrder</span></a></li><li><a class="tocitem" href="#Manual"><span>Manual</span></a></li></ul></li><li><a class="tocitem" href="../CompositeStructures/">Composite structures</a></li><li><a class="tocitem" href="../SimpleTrees/">Simple trees</a></li><li><a class="tocitem" href="../NamedVectors/">Named vectors</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Mathematics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Mathematics/Introduction/">Introduction</a></li><li><a class="tocitem" href="../../Mathematics/Combinatorics/">Combinatorics</a></li><li><a class="tocitem" href="../../Mathematics/VectorSpaces/">Vector spaces</a></li><li><a class="tocitem" href="../../Mathematics/AlgebraOverFields/">Algebra over fields</a></li><li><a class="tocitem" href="../../Mathematics/QuantumNumbers/">Quantum numbers</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Essentials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Essentials/Introduction/">Introduction</a></li><li><a class="tocitem" href="../../Essentials/Spatials/">Spatials</a></li><li><a class="tocitem" href="../../Essentials/DegreesOfFreedom/">Degrees of freedom</a></li><li><a class="tocitem" href="../../Essentials/Terms/">Terms</a></li><li><a class="tocitem" href="../../Essentials/FockPackage/">Fock package</a></li><li><a class="tocitem" href="../../Essentials/SpinPackage/">Spin package</a></li><li><a class="tocitem" href="../../Essentials/Frameworks/">Frameworks</a></li></ul></li></ul></li><li><span class="tocitem">Developer Documentation</span><ul><li><a class="tocitem" href="../../../developer/CodeStyle/">Code style guide</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li><a class="is-disabled">Prerequisites</a></li><li class="is-active"><a href>Type traits</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Type traits</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Quantum-Many-Body/QuantumLattices.jl/blob/master/docs/src/man/Prerequisites/TypeTraits.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Type-traits"><a class="docs-heading-anchor" href="#Type-traits">Type traits</a><a id="Type-traits-1"></a><a class="docs-heading-anchor-permalink" href="#Type-traits" title="Permalink"></a></h1><p>This module defines generic type traits that are useful to the package.</p><p>Julia does not support multi-inheritance, which is sometimes not convenient. A way around this is to use traits, i.e. by utilizing the dispatch on certain (singleton) types known as traits to simulate multi-inheritance. Although this method cannot avoid small repetitive codes, it suits methods well that are complicated and lengthy.</p><h2 id="EfficientOperations"><a class="docs-heading-anchor" href="#EfficientOperations">EfficientOperations</a><a id="EfficientOperations-1"></a><a class="docs-heading-anchor-permalink" href="#EfficientOperations" title="Permalink"></a></h2><p><code>EfficientOperations</code> defines efficient operations such as <code>==/isequal</code>, <code>&lt;/isless</code>, <code>isapprox</code>, <code>replace</code>, etc., that ensure type stability.</p><p>Type stability is the key of Julia to improve the code efficiency. However, it cannot be ensured in some unexpected cases, especially where an iterator is involved. For example, the following codes appears type unstable:</p><pre><code class="language-julia">function Base.:(==)(o1::AbstractType, o2::AbstractType)
    n1, n2 = fieldcount(typeof(o1)), fieldcount(typeof(o2))
    (n1 == n2) ? all(getfield(o1, i) == getfield(o2, i) for i = 1:n1) : false
end</code></pre><p>Methods like above are common when we design abstract types, but they are not type stable. To get rid of it, the generated function trick can be used:</p><pre><code class="language-julia">@generated function Base.:(==)(o1::AbstractType, o2::AbstractType)
    n1, n2 = fieldcount(o1), fieldcount(o2)
    if n1 == n2
        expr=:(getfield(o1, 1) == getfield(o2, 1))
        for i = 2:n1
            expr = Expr(:&amp;&amp;, expr, :(getfield(o1, $i) == getfield(o2, $i)))
        end
        return expr
    else
        return :(false)
    end
end</code></pre><p>Then type stability can be ensured. We use this trick to implement the methods such as <code>==/isequal</code>, <code>&lt;/isless</code>, <code>isapprox</code>, <code>replace</code>, etc., with the trait <code>efficientoperations::EfficientOperations</code>. Other types can resort to these methods by passing <a href="man/Prerequisites/@ref"><code>efficientoperations</code></a> as the first argument.</p><h2 id="MemoryOrder"><a class="docs-heading-anchor" href="#MemoryOrder">MemoryOrder</a><a id="MemoryOrder-1"></a><a class="docs-heading-anchor-permalink" href="#MemoryOrder" title="Permalink"></a></h2><p><code>MemoryOrder</code> provides the conversions, <a href="man/Prerequisites/@ref"><code>subtoind</code></a> and <a href="man/Prerequisites/@ref"><code>indtosub</code></a>, between a Cartesian index represented by a tuple and a linear index represented by an integer. C/C++ order or Fortran order can be specified by use of the constants <a href="man/Prerequisites/@ref"><code>corder</code></a> or <a href="man/Prerequisites/@ref"><code>forder</code></a>, which are instances of singleton types <code>COrder</code> and <code>FOrder</code> that are both subtypes of the abstract type <code>MemoryOrder</code>.</p><h2 id="Manual"><a class="docs-heading-anchor" href="#Manual">Manual</a><a id="Manual-1"></a><a class="docs-heading-anchor-permalink" href="#Manual" title="Permalink"></a></h2><pre><code class="language-">Modules = [TypeTraits]
Order = [:module, :constant, :type, :macro, :function]</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Introduction/">« Introduction</a><a class="docs-footer-nextpage" href="../CompositeStructures/">Composite structures »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 11 March 2021 09:54">Thursday 11 March 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
